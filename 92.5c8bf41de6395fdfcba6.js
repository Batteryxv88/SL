"use strict";(self.webpackChunkjob=self.webpackChunkjob||[]).push([[92],{92:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var r=t(893),a=t(739),s=t(649),i=t(998);const c="ngemgJwv",l="EiLEGA0J",u="UdaXOiDK";var o=t(294),d=t(567),p=t(40),m=["A50U172200","A50U172300","A50U172100","A50U109900","A50U164901","A50UR70A12"],A=["A50UR70244","A3VX600","A3VX700","A3VX800","A3VX900"],h=["A5WH0Y0"],U=["A50UR70323"],f=["A1DUR71C00","A50UR70K22","A50U500401","A1DU504203","A50U501201","A50UR70655","65AA26380","A50U505700","A50U531601","A50U520001","A50UR70B00","A50UR70G01","V218060086"],v=["A57V720211","A50U756300","A7X5720100","A7X5740100","A50U724102","A03U729500","26NA53712","A50U720501","A1UD723500","A03U809500","A50U733712","A50UR73322","A50UM31F00","A50UM31E00","A50UR70F00","A50UR70E22"],N=["A50UR70115"],j=["A7X5601600"],x=["A7X5895400"],R=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K"],g=["A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K"],Y=["A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],b=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"];function y(e,n,t){var r=b.includes(n),a=e.filter((function(e){return r?e.part.partN.startsWith(n)&&e.part.machine===t:e.part.partN===n&&e.part.machine===t}));return 0===a.length?null:a.sort((function(e,n){return new Date(n.part.date).getTime()-new Date(e.part.date).getTime()}))[0].id}var C=t(536),L=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],H=function(){return H=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},H.apply(this,arguments)};const W=function(){var e=(0,i.v9)((function(e){return e.parts.partsArray})),n=(0,i.v9)((function(e){return e.replacedParts.usedPartsArray})),t=(0,s.C)((function(e){return e.machines.machine}));console.log(n);var a=(0,s.T)(),b=(0,o.useState)(0),W=(b[0],b[1]),q=(0,o.useState)(""),w=q[0],K=q[1],M=(0,C.cI)({mode:"onChange"}),T=M.register,D=M.formState.errors,X=M.handleSubmit,S=M.setValue,P=M.reset,V=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],Z=(0,o.useState)(!1),k=Z[0],O=Z[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{className:"fKIr0Jlc",onSubmit:X((function(r){var s=r.partN.trim().toUpperCase(),i=e.filter((function(e){return V.includes(s)?e.part.partN===s.slice(0,-1):e.part.partN===s}));if(!e.some((function(e){return e.part.partN===i[0].part.partN})))return O(!0),P(),void setTimeout((function(){O(!1)}),3e3);O(!1);var c,l=i[0].part.quantity-Number(r.quantity),u=i[0].part.partName,o=(c=s,m.includes(c)?"External section":A.includes(c)||Y.includes(c)?"Developing section":h.includes(c)||R.includes(c)?"Photo conductor section":U.includes(c)||g.includes(c)?"Charging section":f.includes(c)?"Intermediate transfer section":N.includes(c)?"Toner collection section":v.includes(c)?"Fusing section":j.includes(c)?"Paper feed section":x.includes(c)?"Paper exit section":"Unknown section"),b=function(e,n,t){var r,a;if(n.length<=0||!t)return 0;var s=n.filter((function(n){return L.includes(e)?n.part.partN===e.slice(0,-1):n.part.partN===e}));return(null===(a=null===(r=s[0])||void 0===r?void 0:r.part)||void 0===a?void 0:a.partLife)?Math.round(100*t/s[0].part.partLife):0}(s,e,r.serviceLife),C={partN:s,quantity:Number(r.quantity),date:w,section:o,man:r.man,partName:u,machine:t},H={id:i[0].id,part:{quantity:l>=0?l:0}},W=y(n,s,t),q={id:W,part:{serviceLife:r.serviceLife,percent:b}};a((0,d.R5)(q)),a((0,p.Fw)(H)),a((0,d.tv)(C)),P(),console.log(W)})),children:[(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:l,children:"Артикул"}),(0,r.jsx)("input",H({},T("partN",{required:"Обязательное поле",minLength:{value:5,message:"Минимум 5 символов"}}),{className:u}))]}),(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:l,children:"Пройденный ресурс"}),(0,r.jsx)("input",H({},T("serviceLife",{required:"Обязательное поле",minLength:{value:3,message:"Минимум 3 символа"}}),{className:u,type:"number",onChange:function(){fetch("https://worldtimeapi.org/api/timezone/Europe/Moscow").then((function(e){return e.json()})).then((function(e){return K(e.datetime)})).catch((function(e){console.log("Ошибка. Запрос не выполнен: ",e)}))}}))]}),(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:l,children:"Кол-во"}),(0,r.jsx)("input",H({},T("quantity",{required:"Обязательное поле",minLength:{value:1,message:"Минимум 1 символ"}}),{className:"faL4Qb2K",type:"number",onChange:function(e){var n=Number(e.target.value);W(n),S("quantity",n,{shouldValidate:!0})}}))]}),(0,r.jsxs)("div",{className:c,children:[(0,r.jsx)("label",{className:l,children:"Ответственный"}),(0,r.jsxs)("select",H({},T("man",{required:"Обязательное поле"}),{className:u,children:[(0,r.jsx)("option",{value:"Алексей",children:"Алексей"}),(0,r.jsx)("option",{value:"Максим",children:"Максим"}),(0,r.jsx)("option",{value:"Сергей",children:"Сергей"})]}))]}),(0,r.jsx)("button",{className:"WeXgSD6h",type:"submit",children:"Добавить"})]}),(0,r.jsxs)("div",{className:"TiZiIsNU",children:[(null==D?void 0:D.partN)&&(0,r.jsx)("p",{children:null==D?void 0:D.partN.message})||(null==D?void 0:D.man)&&(0,r.jsx)("p",{children:null==D?void 0:D.man.message})||(null==D?void 0:D.quantity)&&(0,r.jsx)("p",{children:null==D?void 0:D.quantity.message})||(null==D?void 0:D.serviceLife)&&(0,r.jsx)("p",{children:null==D?void 0:D.serviceLife.message}),k?(0,r.jsx)("p",{children:"Деталь не найдена в базе"}):""]})]})},q={calendar:"h_IMJcan",box:"tuzckoRo",number:"UnJOYpar",date:"oe5k0Zs2",res:"xfUZNwHH",qty:"NZZmIw_c",h2:"vLaOSyVN"};var w=t(61);const K=function(){var e,n,t=(0,s.C)((function(e){return e.replacedParts.usedPartsArray})),a=(0,s.C)((function(e){return e.filteredParts.filter.section})),i=(0,s.C)((function(e){return e.machines.machine})),c=function(e,n){var t="All"===n?e:e.filter((function(e){return e.part.section===n}));return 0===t.length?t:t.slice().sort((function(e,n){var t=new Date(e.part.date).getTime();return new Date(n.part.date).getTime()-t}))}((e=i,0===(n=t.filter((function(n){return n.part.machine===e}))).length?n:n.slice().sort((function(e,n){var t=new Date(e.part.date).getTime();return new Date(n.part.date).getTime()-t}))),a),l=(0,s.T)();return(0,o.useEffect)((function(){l((0,p.KW)()),l((0,d.BB)())}),[l]),(0,r.jsxs)("div",{className:q.calendar,children:[(0,r.jsx)("h2",{className:q.h2,children:i}),(0,r.jsxs)("div",{className:q.box,children:[(0,r.jsx)("p",{className:q.name,children:"Наименование"}),(0,r.jsx)("p",{className:q.number,children:"Парт номер"}),(0,r.jsx)("p",{className:q.man,children:"Ответственный"}),(0,r.jsx)("p",{className:q.qty,children:"Кол-во"}),(0,r.jsx)("p",{className:q.res,children:"Ресурс"}),(0,r.jsx)("p",{className:q.date,children:"Дата"})]}),c.map((function(e){return(0,r.jsx)(w.Z,{name:e.part.partName,number:e.part.partN,qty:e.part.quantity,man:e.part.man,date:e.part.date,life:e.part.serviceLife,percent:e.part.percent},e.id)}))]})},M=function(){return(0,s.T)()((0,a.o)("schedule")),(0,r.jsxs)("div",{children:[(0,r.jsx)(W,{}),(0,r.jsx)(K,{})]})}},61:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(893);const a="uOQzHNM_",s=function(e){var n=e.name,t=e.number,s=e.qty,i=e.date,c=e.man,l=(e.life,e.percent),u=new Date(i),o=u.toLocaleString("ru-RU",{month:"numeric"}),d=u.toLocaleString("ru-RU",{day:"2-digit"}),p=u.getFullYear();return(0,r.jsxs)("div",{className:"dnQKLzz4",children:[(0,r.jsx)("p",{className:"b3vAdLgC",children:n}),(0,r.jsx)("p",{className:"Bzpv9aOB",children:t}),(0,r.jsx)("p",{className:"XpYXwLg2",children:c}),(0,r.jsx)("p",{className:"ToiLSZ1m",children:s}),(0,r.jsx)("p",{className:l<100?a:l?"ZdImkBs_":a,children:l?l+"%":"0 %"}),(0,r.jsxs)("div",{className:"TidsvjQu",children:[(0,r.jsx)("p",{children:d+"."}),(0,r.jsx)("p",{children:o+"."}),(0,r.jsx)("p",{children:p})]})]})}}}]);