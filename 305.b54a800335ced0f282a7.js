"use strict";(self.webpackChunkjob=self.webpackChunkjob||[]).push([[305],{305:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(893),a=n(998);const s="ngemgJwv",i="EiLEGA0J",c="UdaXOiDK";var l=n(294),u=n(567),o=["A50U172200","A50U172300","A50U172100","A50U109900","A50U164901","A50UR70A12"],d=["A50UR70244","A3VX600","A3VX700","A3VX800","A3VX900"],p=["A5WH0Y0"],f=["A1DUR71C00","A50UR70K22","A50U500401","A1DU504203","A50U501201","A50UR70655","65AA26380","A50U505700","A50U531601","A50U520001","A50UR70B00","A50UR70G01","V218060086"],h=["A57V720211","A50U756300","A7X5720100","A7X5740100","A50U724102","A03U729500","26NA53712","A50U720501","A1UD723500","A03U809500","A50U733712","A50UR73322","A50UM31F00","A50UM31E00","A50UR70F00","A50UR70E22"],m=["A50UR70115"],v=["A7X5601600"],A=["A7X5895400"],x=n(953),j=n(13);const N=function(){var e=(0,a.v9)((function(e){return e.parts.partsArray})),t=(0,a.v9)((function(e){return e.replacedParts.usedPartsArray})),n=(0,a.I0)(),N=(0,l.useState)(""),U=N[0],b=N[1],g=(0,l.useState)(""),y=g[0],w=g[1],R=(0,l.useState)(0),S=R[0],k=R[1],D=(0,l.useState)(""),L=D[0],X=D[1],P=(0,l.useState)(""),q=P[0],C=P[1],E=(0,l.useState)(),T=(E[0],E[1]);return(0,l.useEffect)((function(){fetch("http://worldtimeapi.org/api/timezone/Europe/Moscow").then((function(e){return e.json()})).then((function(e){return X(e.datetime)})).catch((function(e){console.log("Ошибка. Запрос не выполнен: ",e)}))}),[S]),(0,r.jsxs)("form",{className:"fKIr0Jlc",onSubmit:function(r){r.preventDefault();var a,s=e.filter((function(e){return e.part.partN===U})),i=s[0].part.quantity-S,c=s[0].part.partName,l=(a=U,o.includes(a)?"External section":d.includes(a)?"Developing section":p.includes(a)?"Photo conductor section":"A50UR70323"===a?"Charging section":f.includes(a)?"Intermediate transfer section":m.includes(a)?"Toner collection section":h.includes(a)?"Fusing section":v.includes(a)?"Paper feed section":A.includes(a)?"Paper exit section":"Unknown section"),N=y,g={partN:U,quantity:S,date:L,section:l,man:q,partName:c};s[0].id,console.log(s[0].part.quantity),console.log(s[0].id);var R,D,X,P,E,I=function(e,t){var n=e.filter((function(e){return e.part.partN===t}));return 0===n.length?null:n.sort((function(e,t){return new Date(t.part.date).getTime()-new Date(e.part.date).getTime()}))[0].id}(t,U),Z={id:I,part:{serviceLife:N}};n((0,u.R5)(Z)),R=s[0].id,D=void 0,X=void 0,E=function(){var e;return function(e,t){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(t){switch(t.label){case 0:return e=(0,x.JU)(j.Z,"Parts",R),[4,(0,x.r7)(e,{quantity:i})];case 1:return t.sent(),[2]}}))},new((P=void 0)||(P=Promise))((function(e,t){function n(e){try{a(E.next(e))}catch(e){t(e)}}function r(e){try{a(E.throw(e))}catch(e){t(e)}}function a(t){var a;t.done?e(t.value):(a=t.value,a instanceof P?a:new P((function(e){e(a)}))).then(n,r)}a((E=E.apply(D,X||[])).next())})),n((0,u.tv)(g)),b(""),w(""),k(0),T(""),C("")},children:[(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Парт номер"}),(0,r.jsx)("input",{className:c,onChange:function(e){return b(e.target.value.trim())},value:U})]}),(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Пройденный ресурс"}),(0,r.jsx)("input",{className:c,onChange:function(e){return w(e.target.value)},value:y})]}),(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Кол-во"}),(0,r.jsx)("input",{className:"faL4Qb2K",type:"number",onChange:function(e){return k(e.target.value)},value:S})]}),(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Ответственный"}),(0,r.jsxs)("select",{className:c,onChange:function(e){return C(e.target.value)},value:q,children:[(0,r.jsx)("option",{value:""}),(0,r.jsx)("option",{value:"Алексей",children:"Алексей"}),(0,r.jsx)("option",{value:"Максим",children:"Максим"}),(0,r.jsx)("option",{value:"Сергей",children:"Сергей"})]})]}),(0,r.jsx)("button",{className:"WeXgSD6h",type:"submit",children:"Добавить"})]})},U={calendar:"h_IMJcan",box:"tuzckoRo",number:"UnJOYpar",date:"oe5k0Zs2",res:"xfUZNwHH",qty:"NZZmIw_c"};var b=n(40);const g=function(e){var t=e.name,n=e.number,s=e.qty,i=e.date,c=e.man,l=e.life,u=new Date(i),o=u.toLocaleString("ru-RU",{month:"numeric"}),d=u.toLocaleString("ru-RU",{day:"2-digit"}),p=u.getFullYear(),f=function(e,t,n){var r,a;if(t.length<=0||!n)return 0;var s=t.filter((function(t){return t.part.partN===e}));return(null===(a=null===(r=s[0])||void 0===r?void 0:r.part)||void 0===a?void 0:a.partLife)?Math.round(100*n/s[0].part.partLife):0}(n,(0,a.v9)((function(e){return e.parts.partsArray})),l);return(0,r.jsxs)("div",{className:"dnQKLzz4",children:[(0,r.jsx)("p",{className:"b3vAdLgC",children:t}),(0,r.jsx)("p",{className:"Bzpv9aOB",children:n}),(0,r.jsx)("p",{className:"XpYXwLg2",children:c}),(0,r.jsx)("p",{className:"ToiLSZ1m",children:s}),(0,r.jsx)("p",{className:f<100?"uOQzHNM_":"ZdImkBs_",children:f+"%"}),(0,r.jsxs)("div",{className:"TidsvjQu",children:[(0,r.jsx)("p",{children:d+"."}),(0,r.jsx)("p",{children:o+"."}),(0,r.jsx)("p",{children:p})]})]})},y=function(){var e,t,n,s=(0,a.v9)((function(e){return e.replacedParts.usedPartsArray})),i=(0,a.v9)((function(e){return e.filteredParts.filter})),c=0===(n=(e=s,"All"===(t=i)?e:e.filter((function(e){return e.part.section===t})))).length?n:n.slice().sort((function(e,t){var n=new Date(e.part.date).getTime();return new Date(t.part.date).getTime()-n})),o=(0,a.I0)();return(0,l.useEffect)((function(){o((0,b.KW)()),o((0,u.BB)())}),[o]),(0,r.jsxs)("div",{className:U.calendar,children:[(0,r.jsxs)("div",{className:U.box,children:[(0,r.jsx)("p",{className:U.name,children:"Наименование"}),(0,r.jsx)("p",{className:U.number,children:"Парт номер"}),(0,r.jsx)("p",{className:U.man,children:"Ответственный"}),(0,r.jsx)("p",{className:U.qty,children:"Кол-во"}),(0,r.jsx)("p",{className:U.res,children:"Ресурс"}),(0,r.jsx)("p",{className:U.date,children:"Дата"})]}),c.map((function(e){return(0,r.jsx)(g,{name:e.part.partName,number:e.part.partN,qty:e.part.quantity,man:e.part.man,date:e.part.date,life:e.part.serviceLife},e.id)}))]})},w=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(N,{}),(0,r.jsx)(y,{})]})}}}]);