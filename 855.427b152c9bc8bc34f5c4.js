"use strict";(self.webpackChunkjob=self.webpackChunkjob||[]).push([[855],{855:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var r=t(893),a=t(998);const s="ngemgJwv",i="EiLEGA0J",c="UdaXOiDK";var l=t(294),u=t(567),d=t(40),o=["A50U172200","A50U172300","A50U172100","A50U109900","A50U164901","A50UR70A12"],p=["A50UR70244","A3VX600","A3VX700","A3VX800","A3VX900"],m=["A5WH0Y0"],A=["A50UR70323"],h=["A1DUR71C00","A50UR70K22","A50U500401","A1DU504203","A50U501201","A50UR70655","65AA26380","A50U505700","A50U531601","A50U520001","A50UR70B00","A50UR70G01","V218060086"],U=["A57V720211","A50U756300","A7X5720100","A7X5740100","A50U724102","A03U729500","26NA53712","A50U720501","A1UD723500","A03U809500","A50U733712","A50UR73322","A50UM31F00","A50UM31E00","A50UR70F00","A50UR70E22"],f=["A50UR70115"],v=["A7X5601600"],N=["A7X5895400"],j=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K"],x=["A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K"],R=["A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],g=t(536),b=function(){return b=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},b.apply(this,arguments)};const y=function(){var e=(0,a.v9)((function(e){return e.parts.partsArray})),n=(0,a.v9)((function(e){return e.replacedParts.usedPartsArray})),t=(0,a.I0)(),y=(0,l.useState)(0),Y=y[0],L=y[1],q=(0,l.useState)(""),C=q[0],w=q[1];(0,l.useEffect)((function(){fetch("https://worldtimeapi.org/api/timezone/Europe/Moscow").then((function(e){return e.json()})).then((function(e){return w(e.datetime)})).catch((function(e){console.log("Ошибка. Запрос не выполнен: ",e)}))}),[Y]);var H=(0,g.cI)({mode:"onChange"}),K=H.register,M=H.formState.errors,W=H.handleSubmit,X=H.setValue,D=H.reset,S=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],I=(0,l.useState)(!1),P=I[0],T=I[1];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("form",{className:"fKIr0Jlc",onSubmit:W((function(r){var a=r.partN.trim().toUpperCase();if(!e.some((function(e){return e.part.partN===a})))return T(!0),D(),void setTimeout((function(){T(!1)}),3e3);T(!1);var s,i,c,l=e.filter((function(e){return S.includes(a)?e.part.partN===a.slice(0,-1):e.part.partN===a})),g=l[0].part.quantity-Number(r.quantity),b=l[0].part.partName,y=(s=a,o.includes(s)?"External section":p.includes(s)||R.includes(s)?"Developing section":m.includes(s)||j.includes(s)?"Photo conductor section":A.includes(s)||x.includes(s)?"Charging section":h.includes(s)?"Intermediate transfer section":f.includes(s)?"Toner collection section":U.includes(s)?"Fusing section":v.includes(s)?"Paper feed section":N.includes(s)?"Paper exit section":"Unknown section"),Y={partN:a,quantity:Number(r.quantity),date:C,section:y,man:r.man,partName:b},L={id:l[0].id,part:{quantity:g}},q={id:(i=a,0===(c=n.filter((function(e){return e.part.partN===i}))).length?null:c.sort((function(e,n){return new Date(n.part.date).getTime()-new Date(e.part.date).getTime()}))[0].id),part:{serviceLife:r.serviceLife}};t((0,u.R5)(q)),t((0,d.Fw)(L)),t((0,u.tv)(Y)),D()})),children:[(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Парт номер"}),(0,r.jsx)("input",b({},K("partN",{required:"Обязательное поле",minLength:{value:5,message:"Минимум 5 символов"}}),{className:c}))]}),(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Пройденный ресурс"}),(0,r.jsx)("input",b({},K("serviceLife",{required:"Обязательное поле",minLength:{value:3,message:"Минимум 3 символа"}}),{className:c,type:"number"}))]}),(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Кол-во"}),(0,r.jsx)("input",b({},K("quantity",{required:"Обязательное поле",minLength:{value:1,message:"Минимум 1 символ"}}),{className:"faL4Qb2K",type:"number",onChange:function(e){var n=Number(e.target.value);L(n),X("quantity",n,{shouldValidate:!0})}}))]}),(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("label",{className:i,children:"Ответственный"}),(0,r.jsxs)("select",b({},K("man",{required:"Обязательное поле"}),{className:c,children:[(0,r.jsx)("option",{value:"Алексей",children:"Алексей"}),(0,r.jsx)("option",{value:"Максим",children:"Максим"}),(0,r.jsx)("option",{value:"Сергей",children:"Сергей"})]}))]}),(0,r.jsx)("button",{className:"WeXgSD6h",type:"submit",children:"Добавить"})]}),(0,r.jsxs)("div",{className:"TiZiIsNU",children:[(null==M?void 0:M.partN)&&(0,r.jsx)("p",{children:null==M?void 0:M.partN.message})||(null==M?void 0:M.man)&&(0,r.jsx)("p",{children:null==M?void 0:M.man.message})||(null==M?void 0:M.quantity)&&(0,r.jsx)("p",{children:null==M?void 0:M.quantity.message})||(null==M?void 0:M.serviceLife)&&(0,r.jsx)("p",{children:null==M?void 0:M.serviceLife.message}),P?(0,r.jsx)("p",{children:"Деталь не найдена в базе"}):""]})]})},Y={calendar:"h_IMJcan",box:"tuzckoRo",number:"UnJOYpar",date:"oe5k0Zs2",res:"xfUZNwHH",qty:"NZZmIw_c"};var L=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"];const q=function(e){var n=e.name,t=e.number,s=e.qty,i=e.date,c=e.man,l=e.life,u=new Date(i),d=u.toLocaleString("ru-RU",{month:"numeric"}),o=u.toLocaleString("ru-RU",{day:"2-digit"}),p=u.getFullYear(),m=function(e,n,t){var r,a;if(n.length<=0||!t)return 0;var s=n.filter((function(n){return L.includes(e)?n.part.partN===e.slice(0,-1):n.part.partN===e}));return(null===(a=null===(r=s[0])||void 0===r?void 0:r.part)||void 0===a?void 0:a.partLife)?Math.round(100*t/s[0].part.partLife):0}(t,(0,a.v9)((function(e){return e.parts.partsArray})),l);return(0,r.jsxs)("div",{className:"dnQKLzz4",children:[(0,r.jsx)("p",{className:"b3vAdLgC",children:n}),(0,r.jsx)("p",{className:"Bzpv9aOB",children:t}),(0,r.jsx)("p",{className:"XpYXwLg2",children:c}),(0,r.jsx)("p",{className:"ToiLSZ1m",children:s}),(0,r.jsx)("p",{className:m<100?"uOQzHNM_":"ZdImkBs_",children:m+"%"}),(0,r.jsxs)("div",{className:"TidsvjQu",children:[(0,r.jsx)("p",{children:o+"."}),(0,r.jsx)("p",{children:d+"."}),(0,r.jsx)("p",{children:p})]})]})},C=function(){var e,n,t,s=(0,a.v9)((function(e){return e.replacedParts.usedPartsArray})),i=(0,a.v9)((function(e){return e.filteredParts.filter})),c=(e=s,0===(t="All"===(n=i)?e:e.filter((function(e){return e.part.section===n}))).length?t:t.slice().sort((function(e,n){var t=new Date(e.part.date).getTime();return new Date(n.part.date).getTime()-t}))),o=(0,a.I0)();return(0,l.useEffect)((function(){o((0,d.KW)()),o((0,u.BB)())}),[o]),(0,r.jsxs)("div",{className:Y.calendar,children:[(0,r.jsxs)("div",{className:Y.box,children:[(0,r.jsx)("p",{className:Y.name,children:"Наименование"}),(0,r.jsx)("p",{className:Y.number,children:"Парт номер"}),(0,r.jsx)("p",{className:Y.man,children:"Ответственный"}),(0,r.jsx)("p",{className:Y.qty,children:"Кол-во"}),(0,r.jsx)("p",{className:Y.res,children:"Ресурс"}),(0,r.jsx)("p",{className:Y.date,children:"Дата"})]}),c.map((function(e){return(0,r.jsx)(q,{name:e.part.partName,number:e.part.partN,qty:e.part.quantity,man:e.part.man,date:e.part.date,life:e.part.serviceLife},e.id)}))]})},w=function(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(y,{}),(0,r.jsx)(C,{})]})}}}]);