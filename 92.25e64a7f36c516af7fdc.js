"use strict";(self.webpackChunkjob=self.webpackChunkjob||[]).push([[92],{92:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var a=n(893),r=n(739),s=n(649),i=n(998);const c="ngemgJwv",l="EiLEGA0J",u="UdaXOiDK";var o=n(294),d=n(567),p=n(40),A=["A50U172200","A50U172300","A50U172100","A50U109900","A50U164901","A50UR70A12"],m=["A50UR70244","A3VX600","A3VX700","A3VX800","A3VX900"],h=["A5WH0Y0"],U=["A50UR70323"],f=["A1DUR71C00","A50UR70K22","A50U500401","A1DU504203","A50U501201","A50UR70655","65AA26380","A50U505700","A50U531601","A50U520001","A50UR70B00","A50UR70G01","V218060086"],v=["A57V720211","A50U756300","A7X5720100","A7X5740100","A50U724102","A03U729500","26NA53712","A50U720501","A1UD723500","A03U809500","A50U733712","A50UR73322","A50UM31F00","A50UM31E00","A50UR70F00","A50UR70E22"],N=["A50UR70115"],g=["A7X5601600"],j=["A7X5895400"],x=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K"],R=["A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K"],Y=["A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],b=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"];function y(e,t,n){var a=b.includes(t),r=e.filter((function(e){return a?e.part.partN.startsWith(t)&&e.part.machine===n:e.part.partN===t&&e.part.machine===n}));return 0===r.length?null:r.sort((function(e,t){return new Date(t.part.date).getTime()-new Date(e.part.date).getTime()}))[0].id}var C=n(536),M=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],H=function(){return H=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},H.apply(this,arguments)};const L=function(){var e=(0,i.v9)((function(e){return e.parts.partsArray})),t=(0,i.v9)((function(e){return e.replacedParts.usedPartsArray})),n=(0,s.C)((function(e){return e.machines.machine}));console.log(t);var r=(0,s.T)(),b=(0,o.useState)(0),L=(b[0],b[1]),W=(0,o.useState)(""),q=W[0],K=W[1],w=(0,C.cI)({mode:"onChange"}),S=w.register,T=w.formState.errors,D=w.handleSubmit,X=w.setValue,O=w.reset,P=["A5WH0Y0C","A5WH0Y0M","A5WH0Y0Y","A5WH0Y0K","A50UR70323C","A50UR70323M","A50UR70323Y","A50UR70323K","A50UR70244C","A50UR70244M","A50UR70244Y","A50UR70244K"],V=(0,o.useState)(!1),Z=V[0],k=V[1];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{className:"fKIr0Jlc",onSubmit:D((function(a){var s=a.partN.trim().toUpperCase(),i=e.filter((function(e){return P.includes(s)?e.part.partN===s.slice(0,-1):e.part.partN===s}));if(!e.some((function(e){return e.part.partN===i[0].part.partN})))return k(!0),O(),void setTimeout((function(){k(!1)}),3e3);k(!1);var c,l=i[0].part.quantity-Number(a.quantity),u=i[0].part.partName,o=(c=s,A.includes(c)?"External section":m.includes(c)||Y.includes(c)?"Developing section":h.includes(c)||x.includes(c)?"Photo conductor section":U.includes(c)||R.includes(c)?"Charging section":f.includes(c)?"Intermediate transfer section":N.includes(c)?"Toner collection section":v.includes(c)?"Fusing section":g.includes(c)?"Paper feed section":j.includes(c)?"Paper exit section":"Unknown section"),b=function(e,t,n){var a,r;if(t.length<=0||!n)return 0;var s=t.filter((function(t){return M.includes(e)?t.part.partN===e.slice(0,-1):t.part.partN===e}));return(null===(r=null===(a=s[0])||void 0===a?void 0:a.part)||void 0===r?void 0:r.partLife)?Math.round(100*n/s[0].part.partLife):0}(s,e,a.serviceLife),C={partN:s,quantity:Number(a.quantity),date:q,section:o,man:a.man,partName:u,machine:n},H={id:i[0].id,part:{quantity:l>=0?l:0}},L={id:y(t,s,n),part:{serviceLife:a.serviceLife,percent:b}};r((0,d.R5)(L)),r((0,p.Fw)(H)),r((0,d.tv)(C)),O()})),children:[(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("label",{className:l,children:"Артикул"}),(0,a.jsx)("input",H({},S("partN",{required:"Обязательное поле",minLength:{value:5,message:"Минимум 5 символов"}}),{className:u}))]}),(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("label",{className:l,children:"Пройденный ресурс"}),(0,a.jsx)("input",H({},S("serviceLife",{required:"Обязательное поле",minLength:{value:3,message:"Минимум 3 символа"}}),{className:u,type:"number",onChange:function(){var e=function(e){var t=function(e){return String(e).padStart(2,"0")},n=e.getFullYear(),a=t(e.getMonth()+1),r=t(e.getDate()),s=t(e.getHours()),i=t(e.getMinutes()),c=t(e.getSeconds()),l=String(e.getMilliseconds()).padStart(3,"0"),u=-e.getTimezoneOffset(),o=t(Math.floor(u/60)),d=t(Math.abs(u%60)),p=u>=0?"+":"-";return"".concat(n,"-").concat(a,"-").concat(r,"T").concat(s,":").concat(i,":").concat(c,".").concat(l).concat(p).concat(o,":").concat(d)}(new Date);K(e)}}))]}),(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("label",{className:l,children:"Кол-во"}),(0,a.jsx)("input",H({},S("quantity",{required:"Обязательное поле",minLength:{value:1,message:"Минимум 1 символ"}}),{className:"faL4Qb2K",type:"number",onChange:function(e){var t=Number(e.target.value);L(t),X("quantity",t,{shouldValidate:!0})}}))]}),(0,a.jsxs)("div",{className:c,children:[(0,a.jsx)("label",{className:l,children:"Ответственный"}),(0,a.jsxs)("select",H({},S("man",{required:"Обязательное поле"}),{className:u,children:[(0,a.jsx)("option",{value:"Алексей",children:"Алексей"}),(0,a.jsx)("option",{value:"Максим",children:"Максим"}),(0,a.jsx)("option",{value:"Сергей",children:"Сергей"})]}))]}),(0,a.jsx)("button",{className:"WeXgSD6h",type:"submit",children:"Добавить"})]}),(0,a.jsxs)("div",{className:"TiZiIsNU",children:[(null==T?void 0:T.partN)&&(0,a.jsx)("p",{children:null==T?void 0:T.partN.message})||(null==T?void 0:T.man)&&(0,a.jsx)("p",{children:null==T?void 0:T.man.message})||(null==T?void 0:T.quantity)&&(0,a.jsx)("p",{children:null==T?void 0:T.quantity.message})||(null==T?void 0:T.serviceLife)&&(0,a.jsx)("p",{children:null==T?void 0:T.serviceLife.message}),Z?(0,a.jsx)("p",{children:"Деталь не найдена в базе"}):""]})]})},W={calendar:"h_IMJcan",box:"tuzckoRo",number:"UnJOYpar",date:"oe5k0Zs2",res:"xfUZNwHH",qty:"NZZmIw_c",h2:"vLaOSyVN"};var q=n(61);const K=function(){var e,t,n=(0,s.C)((function(e){return e.replacedParts.usedPartsArray})),r=(0,s.C)((function(e){return e.filteredParts.filter.section})),i=(0,s.C)((function(e){return e.machines.machine})),c=function(e,t){var n="All"===t?e:e.filter((function(e){return e.part.section===t}));return 0===n.length?n:n.slice().sort((function(e,t){var n=new Date(e.part.date).getTime();return new Date(t.part.date).getTime()-n}))}((e=i,0===(t=n.filter((function(t){return t.part.machine===e}))).length?t:t.slice().sort((function(e,t){var n=new Date(e.part.date).getTime();return new Date(t.part.date).getTime()-n}))),r),l=(0,s.T)();return(0,o.useEffect)((function(){l((0,p.KW)()),l((0,d.BB)())}),[l]),(0,a.jsxs)("div",{className:W.calendar,children:[(0,a.jsx)("h2",{className:W.h2,children:i}),(0,a.jsxs)("div",{className:W.box,children:[(0,a.jsx)("p",{className:W.name,children:"Наименование"}),(0,a.jsx)("p",{className:W.number,children:"Парт номер"}),(0,a.jsx)("p",{className:W.man,children:"Ответственный"}),(0,a.jsx)("p",{className:W.qty,children:"Кол-во"}),(0,a.jsx)("p",{className:W.res,children:"Ресурс"}),(0,a.jsx)("p",{className:W.date,children:"Дата"})]}),c.map((function(e){return(0,a.jsx)(q.Z,{name:e.part.partName,number:e.part.partN,qty:e.part.quantity,man:e.part.man,date:e.part.date,life:e.part.serviceLife,percent:e.part.percent},e.id)}))]})},w=function(){return(0,s.T)()((0,r.o)("schedule")),(0,a.jsxs)("div",{children:[(0,a.jsx)(L,{}),(0,a.jsx)(K,{})]})}},61:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(893);const r="uOQzHNM_",s=function(e){var t=e.name,n=e.number,s=e.qty,i=e.date,c=e.man,l=(e.life,e.percent),u=new Date(i),o=u.toLocaleString("ru-RU",{month:"numeric"}),d=u.toLocaleString("ru-RU",{day:"2-digit"}),p=u.getFullYear();return(0,a.jsxs)("div",{className:"dnQKLzz4",children:[(0,a.jsx)("p",{className:"b3vAdLgC",children:t}),(0,a.jsx)("p",{className:"Bzpv9aOB",children:n}),(0,a.jsx)("p",{className:"XpYXwLg2",children:c}),(0,a.jsx)("p",{className:"ToiLSZ1m",children:s}),(0,a.jsx)("p",{className:l<100?r:l?"ZdImkBs_":r,children:l?l+"%":"0 %"}),(0,a.jsxs)("div",{className:"TidsvjQu",children:[(0,a.jsx)("p",{children:d+"."}),(0,a.jsx)("p",{children:o+"."}),(0,a.jsx)("p",{children:p})]})]})}}}]);